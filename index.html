<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <title>億家水電修繕會員頁面</title>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-louisaGray min-h-screen">

<!-- Phone Binding Section -->
<div id="phone-binding-section" class="bg-white rounded-lg shadow-md p-6 mb-6">
    <div class="text-center mb-6">
        <img id="profileImage" class="w-24 h-24 rounded-full mx-auto mb-3" src="" alt="Profile">
        <div id="profileName" class="text-lg font-semibold text-gray-800"></div>
    </div>
    <div class="mb-6">
        <label for="phoneNumber" class="block text-gray-700 text-sm font-mono mb-2">請輸入手機號碼進行會員綁定</label>
        <input type="tel" id="phoneNumber" required
               class="w-full px-4 py-2 border border-gray-600 rounded-lg focus:outline-none focus:border-[#007BC2] focus:ring-2 focus:ring-[#007BC2] focus:ring-opacity-50">
        <div id="phoneError" class="text-red-500 text-sm mt-1 hidden">請輸入正確的格式</div>
    </div>
    <button onclick="submitUserData()"
            class="w-full bg-[#007BC2] text-white py-3 px-4 rounded-lg hover:bg-[#0066a3] transition-colors duration-300 font-medium">
        會員綁定
    </button>
</div>

<div id="user-profile-section" class="p-4 w-full hidden">
    <!-- 黑卡卡片 -->
    <div class="relative w-full">
        <!-- Double Border with Corner Dots -->
        <div class="absolute inset-0">
            <!-- Outer Border Container -->
            <div class="absolute inset-0 p-[5px] rounded-2xl border-2 border-[#b78846] before:content-['•'] before:absolute before:top-[5px] before:left-[5px] before:w-[14px] before:h-[14px] before:text-[14px] before:leading-[12px] before:text-center before:text-[#b78846] before:border-2 before:border-[#b78846] after:content-['•'] after:absolute after:top-[5px] after:right-[5px] after:w-[14px] after:h-[14px] after:text-[14px] after:leading-[12px] after:text-center after:text-[#b78846] after:border-2 after:border-[#b78846]">
                <!-- Inner Border Container -->
                <div class="relative w-full h-full border-2 border-[#b78846] before:content-['•'] before:absolute before:bottom-[-2px] before:left-[-2px] before:w-[14px] before:h-[14px] before:text-[14px] before:leading-[12px] before:text-center before:text-[#b78846] before:border-2 before:border-[#b78846] after:content-['•'] after:absolute after:bottom-[-2px] after:right-[-2px] after:w-[14px] after:h-[14px] after:text-[14px] after:leading-[12px] after:text-center after:text-[#b78846] after:border-2 after:border-[#b78846]">
                </div>
            </div>
        </div>

        <!-- Card content -->
        <div id="card" class="w-full h-[200px] rounded-2xl shadow-lg bg-gradient-to-r from-[#0072C6] to-[#005A9C] text-white p-6 flex flex-col justify-between relative overflow-hidden">
            <!-- Background Pattern -->
            <div class="absolute inset-0 overflow-hidden">
                <!-- Wave Gradients -->
                <div class="absolute w-[200%] h-full opacity-20" 
                     style="background: linear-gradient(45deg, #0072C6, #0088E0, #0072C6);
                            transform: translate(-25%, -25%) rotate(-15deg) scale(1.5);">
                </div>
                <div class="absolute w-[200%] h-[80%] opacity-30" 
                     style="background: linear-gradient(-45deg, #005A9C, #0072C6, #005A9C);
                            transform: translate(-15%, 25%) rotate(15deg) scale(1.5);">
                </div>
                <div class="absolute w-[150%] h-[60%] opacity-40" 
                     style="background: linear-gradient(30deg, #0072C6, #005A9C);
                            transform: translate(0%, 50%) rotate(-20deg) scale(1.5);">
                </div>

                <!-- Earth-like network pattern -->
                <svg class="absolute inset-0 w-full h-full opacity-60 mix-blend-overlay" viewBox="0 0 400 200">
                    <!-- Background dots -->
                    <g>
                        <!-- Original dots -->
                        <circle cx="50" cy="50" r="1.5" fill="white"/>
                        <circle cx="150" cy="30" r="1.5" fill="white"/>
                        <circle cx="250" cy="40" r="1.5" fill="white"/>
                        <circle cx="350" cy="60" r="1.5" fill="white"/>
                        <circle cx="80" cy="120" r="1.5" fill="white"/>
                        <circle cx="180" cy="100" r="1.5" fill="white"/>
                        <circle cx="280" cy="140" r="1.5" fill="white"/>
                        <circle cx="380" cy="160" r="1.5" fill="white"/>
                        <circle cx="100" cy="180" r="1.5" fill="white"/>
                        <circle cx="200" cy="160" r="1.5" fill="white"/>
                        <circle cx="300" cy="80" r="1.5" fill="white"/>
                        <circle cx="400" cy="100" r="1.5" fill="white"/>
                        <!-- First additional set -->
                        <circle cx="120" cy="70" r="1.5" fill="white"/>
                        <circle cx="220" cy="90" r="1.5" fill="white"/>
                        <circle cx="320" cy="110" r="1.5" fill="white"/>
                        <circle cx="70" cy="150" r="1.5" fill="white"/>
                        <circle cx="170" cy="130" r="1.5" fill="white"/>
                        <circle cx="270" cy="170" r="1.5" fill="white"/>
                        <circle cx="370" cy="40" r="1.5" fill="white"/>
                        <circle cx="30" cy="90" r="1.5" fill="white"/>
                        <!-- Second additional set -->
                        <circle cx="125" cy="45" r="1.5" fill="white"/>
                        <circle cx="225" cy="65" r="1.5" fill="white"/>
                        <circle cx="325" cy="85" r="1.5" fill="white"/>
                        <circle cx="75" cy="135" r="1.5" fill="white"/>
                        <circle cx="175" cy="155" r="1.5" fill="white"/>
                        <circle cx="275" cy="25" r="1.5" fill="white"/>
                        <circle cx="375" cy="115" r="1.5" fill="white"/>
                        <circle cx="25" cy="175" r="1.5" fill="white"/>
                        <!-- New additional dots -->
                        <circle cx="40" cy="30" r="1.5" fill="white"/>
                        <circle cx="90" cy="60" r="1.5" fill="white"/>
                        <circle cx="140" cy="80" r="1.5" fill="white"/>
                        <circle cx="190" cy="40" r="1.5" fill="white"/>
                        <circle cx="240" cy="120" r="1.5" fill="white"/>
                        <circle cx="290" cy="60" r="1.5" fill="white"/>
                        <circle cx="340" cy="90" r="1.5" fill="white"/>
                        <circle cx="390" cy="70" r="1.5" fill="white"/>
                        <circle cx="60" cy="100" r="1.5" fill="white"/>
                        <circle cx="110" cy="140" r="1.5" fill="white"/>
                        <circle cx="160" cy="70" r="1.5" fill="white"/>
                        <circle cx="210" cy="110" r="1.5" fill="white"/>
                        <!-- Extra density dots -->
                        <circle cx="45" cy="75" r="1.5" fill="white"/>
                        <circle cx="95" cy="95" r="1.5" fill="white"/>
                        <circle cx="145" cy="115" r="1.5" fill="white"/>
                        <circle cx="195" cy="75" r="1.5" fill="white"/>
                        <circle cx="245" cy="155" r="1.5" fill="white"/>
                        <circle cx="295" cy="35" r="1.5" fill="white"/>
                        <circle cx="345" cy="125" r="1.5" fill="white"/>
                        <circle cx="395" cy="45" r="1.5" fill="white"/>
                        <!-- Final set of dots -->
                        <circle cx="35" cy="145" r="1.5" fill="white"/>
                        <circle cx="85" cy="35" r="1.5" fill="white"/>
                        <circle cx="135" cy="165" r="1.5" fill="white"/>
                        <circle cx="185" cy="15" r="1.5" fill="white"/>
                        <circle cx="235" cy="185" r="1.5" fill="white"/>
                        <circle cx="285" cy="105" r="1.5" fill="white"/>
                        <circle cx="335" cy="25" r="1.5" fill="white"/>
                        <circle cx="385" cy="135" r="1.5" fill="white"/>
                    </g>
                    
                    <!-- Connection lines -->
                    <g stroke="white" stroke-width="0.3" opacity="0.5">
                        <!-- Horizontal connections -->
                        <path d="M50,50 L150,30 L250,40 L350,60" fill="none"/>
                        <path d="M80,120 L180,100 L280,140 L380,160" fill="none"/>
                        <path d="M100,180 L200,160 L300,80 L400,100" fill="none"/>
                        <!-- Vertical connections -->
                        <path d="M50,50 L80,120 L100,180" fill="none"/>
                        <path d="M150,30 L180,100 L200,160" fill="none"/>
                        <path d="M250,40 L280,140 L300,80" fill="none"/>
                        <path d="M350,60 L380,160 L400,100" fill="none"/>
                        <!-- Diagonal connections -->
                        <path d="M120,70 L220,90 L320,110" fill="none"/>
                        <path d="M70,150 L170,130 L270,170" fill="none"/>
                        <path d="M30,90 L120,70 L220,90" fill="none"/>
                        <path d="M370,40 L320,110 L270,170" fill="none"/>
                        <!-- Curved connections -->
                        <path d="M50,50 Q150,80 250,40" fill="none"/>
                        <path d="M100,180 Q200,120 300,80" fill="none"/>
                        <path d="M80,120 Q180,150 280,140" fill="none"/>
                        <!-- Additional curved paths -->
                        <path d="M30,90 Q130,60 230,90" fill="none"/>
                        <path d="M170,130 Q270,100 370,130" fill="none"/>
                        <path d="M125,45 Q225,75 325,45" fill="none"/>
                        <!-- New connection paths -->
                        <path d="M40,30 Q140,50 240,120" fill="none"/>
                        <path d="M90,60 Q190,40 290,60" fill="none"/>
                        <path d="M140,80 Q240,120 340,90" fill="none"/>
                        <path d="M45,75 Q145,115 245,155" fill="none"/>
                        <path d="M95,95 Q195,75 295,35" fill="none"/>
                        <path d="M35,145 Q135,165 235,185" fill="none"/>
                    </g>

                    <!-- Animated pulse effects -->
                    <g>
                        <circle cx="200" cy="100" r="3" fill="white" opacity="0.4">
                            <animate attributeName="r" values="3;6;3" dur="3s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.2;0.1;0.2" dur="3s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="100" cy="150" r="2" fill="white" opacity="0.15">
                            <animate attributeName="r" values="2;4;2" dur="4s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.15;0.05;0.15" dur="4s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="300" cy="80" r="2.5" fill="white" opacity="0.18">
                            <animate attributeName="r" values="2.5;5;2.5" dur="3.5s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.18;0.08;0.18" dur="3.5s" repeatCount="indefinite"/>
                        </circle>
                    </g>
                </svg>
            </div>

            <div class="flex justify-between items-center relative z-10">
                <div class="text-xl font-semibold">億家水電</div>
                <img src="https://img.icons8.com/ios-filled/50/ffffff/sim-card-chip.png" alt="Chip"
                     class="w-10 h-10 opacity-80">
            </div>
            
            <div id="holder" class="text-lg tracking-widest font-mono relative z-10">xxxx xxxx xxxx xxxx</div>
            
            <div class="flex justify-between items-end text-sm relative z-10">
                <div>
                    <div class="uppercase text-xs opacity-70">Card Holder</div>
                    <div id="name" class="font-medium">王大明</div>
                </div>
                <div>
                    <div class="uppercase text-xs opacity-70">等級</div>
                    <div id="level" class="font-medium text-right">銅</div>
                </div>
            </div>
        </div>
    </div>
    
    <br>
    <div class="text-base font-mono">歷史派工單</div>
    
    <!-- 折疊式選單 Container -->
    <div id="dispatches" class="space-y-2">
        <!-- Orders will be dynamically inserted here -->
    </div>
</div>
<script src="liff.js"></script>
</body>
</html> 